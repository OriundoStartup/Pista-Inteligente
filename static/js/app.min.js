(function(){'use strict';const PageLoader={element:null,init(){this.element=document.getElementById('page-loader');window.addEventListener('load',()=>this.hide());},show(){if(this.element){this.element.classList.add('active');document.body.classList.add('loading');}},hide(){if(this.element){this.element.classList.remove('active');document.body.classList.remove('loading');}}};const Prefetcher={prefetched:new Set(),hoverDelay:200,init(){document.querySelectorAll('a[href^="/"]').forEach(link=>{let timer=null;link.addEventListener('mouseenter',()=>{const href=link.getAttribute('href');if(this.prefetched.has(href))return;timer=setTimeout(()=>{this.prefetch(href);},this.hoverDelay);});link.addEventListener('mouseleave',()=>{if(timer)clearTimeout(timer);});});},prefetch(url){if(this.prefetched.has(url))return;const link=document.createElement('link');link.rel='prefetch';link.href=url;link.as='document';document.head.appendChild(link);this.prefetched.add(url);}};const PageTransitions={duration:200,init(){document.body.classList.add('page-entering');setTimeout(()=>{document.body.classList.remove('page-entering');document.body.classList.add('page-ready');},300);document.querySelectorAll('a[href^="/"]').forEach(link=>{link.addEventListener('click',(e)=>this.handleClick(e,link));});},handleClick(e,link){const href=link.getAttribute('href');if(e.ctrlKey||e.metaKey||e.shiftKey)return;if(href===window.location.pathname){e.preventDefault();return;}
e.preventDefault();this.navigateTo(href);},navigateTo(url){PageLoader.show();document.body.classList.add('page-exiting');document.body.classList.remove('page-ready');setTimeout(()=>{window.location.href=url;},this.duration);}};const ContentReveal={init(){const observer=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){entry.target.classList.add('revealed');observer.unobserve(entry.target);}});},{threshold:0.1,rootMargin:'0px 0px -50px 0px'});document.querySelectorAll('.glass-card, .hero, .section-title').forEach(el=>{el.classList.add('reveal-on-scroll');observer.observe(el);});}};const PerformanceHints={init(){if(window.matchMedia('(prefers-reduced-motion: reduce)').matches){document.documentElement.classList.add('reduce-motion');}
document.querySelectorAll('.glass-card, .nav-link, .cta-button').forEach(el=>{el.style.willChange='transform, opacity';});setTimeout(()=>{document.querySelectorAll('.glass-card, .nav-link, .cta-button').forEach(el=>{el.style.willChange='auto';});},1000);}};function init(){PageLoader.init();Prefetcher.init();PageTransitions.init();ContentReveal.init();PerformanceHints.init();if(window.location.hostname==='localhost'||window.location.hostname==='127.0.0.1'){console.log('ðŸš€ Pista Inteligente: Performance module loaded');}}
if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',init);}else{init();}
window.PistaInteligente={PageLoader,Prefetcher,PageTransitions,ContentReveal};})();